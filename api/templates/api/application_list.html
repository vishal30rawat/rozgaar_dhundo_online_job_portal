{% extends 'api/base.html' %}
{% load static %}

{% block content %}

<h1 style="text-align:center;"> Applied Jobs</h1>

<div class="search_job" style="position: absolute;top: 85px; right:50px; background:pink; width:1410px; padding: 20px 10px;height:170px;">

 <h2 style="text-align:center;">Search & Filter Jobs</h2>
<form class="search_job" method="GET" action="">
    Is Remote Job:  <input type="radio" id="remote_true" name="is_remote" value="true">True
    <input type="radio" id="remote_false" name="is_remote" value="false">False

    <select style="position:relative;top:30px;" name="skill" multiple>
    {% for skill in skills %}
        <option value="{{skill.id}}">{{skill.name}}</option>
    {% endfor %}
    </select>

    <select style="position:relative;top:30px;" name="city" multiple>
    {% for city in cities %}
        <option value="{{city.id}}">{{city.name}}</option>
    {% endfor %}
    </select>
    <select style="position:relative;top:30px;" name="company" multiple>
    {% for company in companies %}
        <option value="{{company.id}}">{{company.name}}</option>
    {% endfor %}
    </select>
    <select style="position:relative;top:30px;" name="status" multiple>
        <option value="APP">Candidate Applied</option>
        <option value="DEC">Company Declined</option>
        <option value="ACC">Company Accepted</option>
    </select>

    applied date from: <input type="date" name="from_date">
    applied date to: <input type="date" name="to_date">
    <input type="search" name="search" placeholder="Job title/company name">
    <input type="submit">
</form>
</div>

{% if job_posts %}
<div class="jobs table" style="position:absolute;width:95%; height:1000px;top:240px;right:90px;">>
<table width="100%" style="border: 2px solid black;text-align:center;margin:50px 50px;">
    <th>Applied on</th>
    <th>status</th>
    <th>Title</th>
    <th>Company</th>
    <th>Company Logo</th>
    <th>Can be remote</th>
    <th> View More</th>
    {% for job_post in job_posts %}
        <tr>
            <td>{{job_post.applied_on}}</td>
            <td><strong> {% if job_post.applied_status == 'APP' %}
                    Candidate Applied
                {% elif job_post.applied_status == 'DEC' %}
                    Company Declined
                {% elif job_post.applied_status == 'ACC' %}
                    Company Accepted
                {% endif %}
            </strong>
            </td>
            <td><strong>{{job_post.title}}</strong></td>
            <td>{{job_post.company.name}}</td>
            <td><img src="{{job_post.company.logo.url}}" alt="{{job_post.company.name}}" width="50px" height="30px"></td>
            <td>{% if job_post.can_be_remote %} Yes {% else %} No {% endif %}</td>

            <td><a href="/jobdetail/{{ job_post.id }}/" target="_blank" class="see_detail" style="text-decoration:none;">View Details</a></td>
        </tr>
    {% endfor %}
</table>
{% endif %}
<div class="pagination" style="text-align:center;font-weight:bold;font-size:25px; top:480px; right:570px; position:absolute;">
    <span class="step-links">
        {% if page_obj.has_previous %}
            <a href="?page=1">&laquo; first</a>
            <a href="?page={{ page_obj.previous_page_number }}">previous</a>
        {% endif %}

        <span class="current">
            Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
        </span>

        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">next</a>
            <a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
        {% endif %}
    </span>
</div>

</div>
    {% endblock %}
